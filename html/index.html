<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Custom SDL3 WASM App</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="topContainer">
  <div id="playerContainer">
    <canvas id="canvas" width="100%" height="150" style="display: block; border: none;"></canvas>

    <div id="controls">
      <div id="progressContainer">
        <div id="progressBar"></div>
      </div>
      <button onclick="seek(-5)" class="control">-5s</button>
      <button onclick="playVideo()" class="control">Play</button>
      <button onclick="pauseVideo()" class="control">Pause</button>
      <button onclick="seek(5)" class="control">+5s</button>
      <button onclick="restartVideo()" class="control">Restart</button>
    </div>
  </div>

  <div id="songMenu" style="width: 250px; max-height: 400px; overflow-y: auto; background: #1a1a1a; color: white; padding: 8px; font-family: sans-serif; border: 1px solid #333;">
  <div style="font-weight: bold; margin-bottom: 6px;">Songs</div>
  <ul id="songList" style="list-style: none; padding: 0; margin: 0;"></ul>
</div>


  <div id="dropzone" style="width: 300px; height: 200px; border: 3px dashed #555; display:flex; align-items:center; justify-content:center; font-family: sans-serif; cursor:pointer;">
    Drop MIDI file here
  </div>
</div>

  <input id="offset" type="text" placeholder="seconds to offset the midi data">

  <input id="link" type="text" placeholder="url to song json">
  <button onclick="loadSong()">update</button>

  <div id="videoInput" style="margin: 10px 0; display: flex; gap: 8px;">
    <input id="ytUrl" type="text" placeholder="YouTube URL"
      style="flex:1; padding: 6px; background: #333; color: white; border: 1px solid white; border-radius: 4px;" />
    <button onclick="loadVideo()" class="control">Load</button>
  </div>

  <div id="player" style="width:0; height:0; overflow:hidden; position:absolute;"></div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="script.js"></script>
  <script src="app.js"></script>

<script type="module">
  import { Midi } from 'https://esm.sh/@tonejs/midi';
  window.Midi = Midi;
</script>

  <script defer src="midiconvert.js"></script>
</body>
</html>
